<div class="columns mt-4">
  <div class="column is-one-fifth">
    <nav class="panel ">
      <p class="panel-heading">
        Filters
      </p>

      <div class="panel-tabs">
        <a class="<%= 'is-active' if @page == :transactions %>" href="/transactions">Tags</a>
        <a class="<%= 'is-active' if @page == :transactions_tag_sets %>" href="/transactions/tag_sets">Tag Sets</a>
      </div>      

      <!-- Need to handle nesting here. transactions_schedule is nested within transactions.  -->
      <!-- Prob need a "navigation path" -->
      <% if @page == :transactions || @page == :transactions_schedule %>
        <%= erb :transaction_filters_tags, locals: { params: params, tag_index: data[:tag_index], accounts: accounts } %>
      <% elsif @page == :transactions_tag_sets %>
        <%= erb :transaction_filters_tag_sets, locals: { params: params, tag_sets: data[:tag_sets] } %>
      <% end %>
    </nav>
  </div>
  
  <div class="column">
    <% if @page == :transactions_schedule %>
      <%= erb :transaction_table_header, locals: { title: 'Scheduled Transactions' } %>
      <% if data[:transactions].first.respond_to?(:incomes) %>
        <%= erb :transactions_by_pay_period, locals: { pay_periods: data[:transactions] } %>
      <% else %>
       <%= erb :transactions_by_month, locals: { periods: data[:transactions] } %>
      <% end %>
    <% else%>
      <%= erb :transaction_table_header, locals: { title: 'Recurring Transactions' } %>
      <%= erb :planned_transaction_table, locals: { transactions: data[:transactions].transactions, tag_index: data[:tag_index] } %>
    <% end %>
  </div>
</div>

